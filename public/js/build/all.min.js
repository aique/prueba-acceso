function AffiliateManager(){this.serviceUrl="/services/getAffiliate.php",this.getAffiliateInfo=function(a){var b=this.getAffiliateInfoFromCookie(a);return null==b&&(b=this.getAffiliateInfoFromServer(a),this.saveAffiliateInfoCookie(b)),b},this.saveAffiliateInfoCookie=function(a){$.cookie("MB_AFFILIATE_NAME",a.name),$.cookie("MB_AFFILIATE_WEB",a.web),$.cookie("MB_AFFILIATE_NATS_WEBCAMS",a.nats_webcams),$.cookie("MB_AFFILIATE_NATS_CUMLOUDER",a.nats_cumlouder),$.cookie("MB_AFFILIATE_CSS_ROUTE",a.css_route),$.cookie("MB_AFFILIATE_GOOGLE_ANALYTICS",a.google_analytics)},this.getAffiliateInfoFromCookie=function(a){var b=null,c=$.cookie("MB_AFFILIATE_WEB");return-1!=a.indexOf(c)&&(b=new Affiliate({name:$.cookie("MB_AFFILIATE_NAME"),web:$.cookie("MB_AFFILIATE_WEB"),nats_webcams:$.cookie("MB_AFFILIATE_NATS_WEBCAMS"),nats_cumlouder:$.cookie("MB_AFFILIATE_NATS_CUMLOUDER"),css_route:$.cookie("MB_AFFILIATE_CSS_ROUTE"),google_analytics:$.cookie("MB_AFFILIATE_GOOGLE_ANALYTICS")})),b},this.getAffiliateInfoFromServer=function(a){var b=null;return $.ajax({url:this.serviceUrl,method:"GET",async:!1,data:{url:a}}).done(function(a){b=new Affiliate($.parseJSON(a))}),b}}function GalleryManager(){this.url="/services/getGallery.php",this.thumbsUrl="http://w0.imgcm.com/modelos/",this.camsUrl="http://webcams.cumlouder.com/joinmb/cumlouder/",this.smallThumbsRowNumImg=5,this.bigTumbRowNumImg=7,this.loadGalleries=function(a){var b=$.cookie("MB_LAST_GALLERY_REFRESH");if(void 0==b)this.loadGalleriesFromServer(a,!0);else{b=new Date(b);var c=new Date-b;c>Config.galleryRefreshPeriod?this.loadGalleriesFromServer(a,!0):this.loadGalleriesFromServer(a,!1)}},this.loadGalleriesFromServer=function(a,b){var c=this;b&&$.cookie("MB_LAST_GALLERY_REFRESH",(new Date).toString()),$.ajax({url:this.url,type:"GET",data:{refresh:b}}).done(function(b){c.loadGallery($.parseJSON(b),a)})},this.loadGallery=function(a,b){$(".chica").remove();for(var c=a.length,d=$(".listado-chicas"),e=!0,f=0,g=!0,h=!0,i=0;c>i;i++)e?(d.append(this.createThumb(a[i],b,null,null)),f++,f==this.smallThumbsRowNumImg&&(f=0,e=!1)):(0==f?g?(d.append(this.createThumb(a[i],b,"big",null)),h?h=!1:(d.append(this.createThumb(a[i],b,null,null)),f++),g=!1):(d.append(this.createThumb(a[i],b,"big","grande-derecha")),d.append(this.createThumb(a[i],b,null,null)),f++,g=!0):d.append(this.createThumb(a[i],b,null,null)),f++,f==this.bigTumbRowNumImg&&(f=0,e=!0))},this.createThumb=function(a,b,c,d){var e=null;return e="big"==c?this.createBigThumb(a,b,d):this.createCommonThumb(a,b),$(e.find("a")).click(function(a){a.preventDefault();var b=$(this).attr("href");console.log(b),$.modal('<iframe src="'+b+'" height="675" width="1050" style="border:0">',{closeHTML:"",overlayClose:!0})}),e},this.createBigThumb=function(a,b,c){var d=this.thumbsUrl+a.wbmerThumb1,e=this.camsUrl+a.wbmerPermalink+"/?nats="+b.nats_webcams;if(null==c)var f=$("<div></div>").addClass("chica chica-grande");else var f=$("<div></div>").addClass("chica chica-grande "+c);var g=$("<a></a>").addClass("link").attr("href",e).attr("title",""),h=$("<span></span>").addClass("thumb"),i=$("<img />").attr("src",d).attr("width","357").attr("height","307").attr("alt","").attr("title",""),j=$("<span></span>").addClass("nombre-chica").text(a.wbmerNick),k=$("<span></span>").addClass("ico-online"),l=$("<span></span>").addClass("ico-favorito").attr("id","favorito");return g.append(h.append(i)).append(j.append(k)).append(l),f.append(g),f},this.createCommonThumb=function(a,b){var c=this.thumbsUrl+a.wbmerThumb1,d=this.camsUrl+a.wbmerPermalink+"/?nats="+b.nats_webcams,e=$("<div></div>").addClass("chica"),f=$("<a></a>").addClass("link").attr("href",d).attr("title",""),g=$("<span></span>").addClass("thumb"),h=$("<img />").attr("src",c).attr("width","175").attr("height","150").attr("alt","").attr("title",""),i=$("<span></span>").addClass("nombre-chica").text(a.wbmerNick),j=$("<span></span>").addClass("ico-online"),k=$("<span></span>").addClass("ico-favorito").attr("id","favorito");return f.append(g.append(h)).append(i.append(j)).append(k),e.append(f),e}}function StylesManager(){}function Config(){}function Affiliate(a){this.name=a.name,this.web=a.web,this.nats_webcams=a.nats_webcams,this.nats_cumlouder=a.nats_cumlouder,this.css_route=a.css_route,this.google_analytics=a.google_analytics}StylesManager.applyStyles=function(a){var b=$("head");b.append('<link rel="stylesheet" type="text/css" href="/styles/'+a.css_route+'/reset.css">'),b.append('<link rel="stylesheet" type="text/css" href="/styles/'+a.css_route+'/estilos.css">');var c=$(".logo-sitio");c.attr("title",a.name),c.find("a").text(a.name)},$(function(){var a=window.location.href,b=new AffiliateManager,c=new GalleryManager,d=b.getAffiliateInfo(a);StylesManager.applyStyles(d),c.loadGalleries(d),setInterval(function(){c.loadGalleries(d)},Config.galleryRefreshPeriod)}),!function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a("object"==typeof exports?require("jquery"):jQuery)}(function(a){function b(a){return h.raw?a:encodeURIComponent(a)}function c(a){return h.raw?a:decodeURIComponent(a)}function d(a){return b(h.json?JSON.stringify(a):String(a))}function e(a){0===a.indexOf('"')&&(a=a.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return a=decodeURIComponent(a.replace(g," ")),h.json?JSON.parse(a):a}catch(b){}}function f(b,c){var d=h.raw?b:e(b);return a.isFunction(c)?c(d):d}var g=/\+/g,h=a.cookie=function(e,g,i){if(void 0!==g&&!a.isFunction(g)){if(i=a.extend({},h.defaults,i),"number"==typeof i.expires){var j=i.expires,k=i.expires=new Date;k.setTime(+k+864e5*j)}return document.cookie=[b(e),"=",d(g),i.expires?"; expires="+i.expires.toUTCString():"",i.path?"; path="+i.path:"",i.domain?"; domain="+i.domain:"",i.secure?"; secure":""].join("")}for(var l=e?void 0:{},m=document.cookie?document.cookie.split("; "):[],n=0,o=m.length;o>n;n++){var p=m[n].split("="),q=c(p.shift()),r=p.join("=");if(e&&e===q){l=f(r,g);break}e||void 0===(r=f(r))||(l[q]=r)}return l};h.defaults={},a.removeCookie=function(b,c){return void 0===a.cookie(b)?!1:(a.cookie(b,"",a.extend({},c,{expires:-1})),!a.cookie(b))}}),function(a){"function"==typeof define&&define.amd?define(["jquery"],a):a(jQuery)}(function(a){var b,c,d=[],e=a(document),f=navigator.userAgent.toLowerCase(),g=a(window),h=[],i=null,j=/msie/.test(f)&&!/opera/.test(f),k=/opera/.test(f);b=j&&/msie 6./.test(f)&&"object"!=typeof window.XMLHttpRequest,c=j&&/msie 7.0/.test(f),a.modal=function(b,c){return a.modal.impl.init(b,c)},a.modal.close=function(){a.modal.impl.close()},a.modal.focus=function(b){a.modal.impl.focus(b)},a.modal.setContainerDimensions=function(){a.modal.impl.setContainerDimensions()},a.modal.setPosition=function(){a.modal.impl.setPosition()},a.modal.update=function(b,c){a.modal.impl.update(b,c)},a.fn.modal=function(b){return a.modal.impl.init(this,b)},a.modal.defaults={appendTo:"body",focus:!0,opacity:50,overlayId:"simplemodal-overlay",overlayCss:{},containerId:"simplemodal-container",containerCss:{},dataId:"simplemodal-data",dataCss:{},minHeight:null,minWidth:null,maxHeight:null,maxWidth:null,autoResize:!1,autoPosition:!0,zIndex:1e3,close:!0,closeHTML:'<a class="modalCloseImg" title="Close"></a>',closeClass:"simplemodal-close",escClose:!0,overlayClose:!1,fixed:!0,position:null,persist:!1,modal:!0,onOpen:null,onShow:null,onClose:null},a.modal.impl={d:{},init:function(b,c){if(this.d.data)return!1;if(i=j&&!a.support.boxModel,this.o=a.extend({},a.modal.defaults,c),this.zIndex=this.o.zIndex,this.occb=!1,"object"==typeof b)b=b instanceof a?b:a(b),this.d.placeholder=!1,0<b.parent().parent().size()&&(b.before(a("<span></span>").attr("id","simplemodal-placeholder").css({display:"none"})),this.d.placeholder=!0,this.display=b.css("display"),!this.o.persist)&&(this.d.orig=b.clone(!0));else{if("string"!=typeof b&&"number"!=typeof b)return alert("SimpleModal Error: Unsupported data type: "+typeof b),this;b=a("<div></div>").html(b)}return this.create(b),this.open(),a.isFunction(this.o.onShow)&&this.o.onShow.apply(this,[this.d]),this},create:function(c){this.getDimensions(),this.o.modal&&b&&(this.d.iframe=a('<iframe src="javascript:false;"></iframe>').css(a.extend(this.o.iframeCss,{display:"none",opacity:0,position:"fixed",height:h[0],width:h[1],zIndex:this.o.zIndex,top:0,left:0})).appendTo(this.o.appendTo)),this.d.overlay=a("<div></div>").attr("id",this.o.overlayId).addClass("simplemodal-overlay").css(a.extend(this.o.overlayCss,{display:"none",opacity:this.o.opacity/100,height:this.o.modal?d[0]:0,width:this.o.modal?d[1]:0,position:"fixed",left:0,top:0,zIndex:this.o.zIndex+1})).appendTo(this.o.appendTo),this.d.container=a("<div></div>").attr("id",this.o.containerId).addClass("simplemodal-container").css(a.extend({position:this.o.fixed?"fixed":"absolute"},this.o.containerCss,{display:"none",zIndex:this.o.zIndex+2})).append(this.o.close&&this.o.closeHTML?a(this.o.closeHTML).addClass(this.o.closeClass):"").appendTo(this.o.appendTo),this.d.wrap=a("<div></div>").attr("tabIndex",-1).addClass("simplemodal-wrap").css({height:"100%",outline:0,width:"100%"}).appendTo(this.d.container),this.d.data=c.attr("id",c.attr("id")||this.o.dataId).addClass("simplemodal-data").css(a.extend(this.o.dataCss,{display:"none"})).appendTo("body"),this.setContainerDimensions(),this.d.data.appendTo(this.d.wrap),(b||i)&&this.fixIE()},bindEvents:function(){var c=this;a("."+c.o.closeClass).bind("click.simplemodal",function(a){a.preventDefault(),c.close()}),c.o.modal&&c.o.close&&c.o.overlayClose&&c.d.overlay.bind("click.simplemodal",function(a){a.preventDefault(),c.close()}),e.bind("keydown.simplemodal",function(a){c.o.modal&&9===a.keyCode?c.watchTab(a):c.o.close&&c.o.escClose&&27===a.keyCode&&(a.preventDefault(),c.close())}),g.bind("resize.simplemodal orientationchange.simplemodal",function(){c.getDimensions(),c.o.autoResize?c.setContainerDimensions():c.o.autoPosition&&c.setPosition(),b||i?c.fixIE():c.o.modal&&(c.d.iframe&&c.d.iframe.css({height:h[0],width:h[1]}),c.d.overlay.css({height:d[0],width:d[1]}))})},unbindEvents:function(){a("."+this.o.closeClass).unbind("click.simplemodal"),e.unbind("keydown.simplemodal"),g.unbind(".simplemodal"),this.d.overlay.unbind("click.simplemodal")},fixIE:function(){var b=this.o.position;a.each([this.d.iframe||null,this.o.modal?this.d.overlay:null,"fixed"===this.d.container.css("position")?this.d.container:null],function(a,c){if(c){var d=c[0].style;if(d.position="absolute",2>a)d.removeExpression("height"),d.removeExpression("width"),d.setExpression("height",'document.body.scrollHeight > document.body.clientHeight ? document.body.scrollHeight : document.body.clientHeight + "px"'),d.setExpression("width",'document.body.scrollWidth > document.body.clientWidth ? document.body.scrollWidth : document.body.clientWidth + "px"');else{var e,f;b&&b.constructor===Array?(e=b[0]?"number"==typeof b[0]?b[0].toString():b[0].replace(/px/,""):c.css("top").replace(/px/,""),e=-1===e.indexOf("%")?e+' + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"':parseInt(e.replace(/%/,""))+' * ((document.documentElement.clientHeight || document.body.clientHeight) / 100) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',b[1]&&(f="number"==typeof b[1]?b[1].toString():b[1].replace(/px/,""),f=-1===f.indexOf("%")?f+' + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"':parseInt(f.replace(/%/,""))+' * ((document.documentElement.clientWidth || document.body.clientWidth) / 100) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"')):(e='(document.documentElement.clientHeight || document.body.clientHeight) / 2 - (this.offsetHeight / 2) + (t = document.documentElement.scrollTop ? document.documentElement.scrollTop : document.body.scrollTop) + "px"',f='(document.documentElement.clientWidth || document.body.clientWidth) / 2 - (this.offsetWidth / 2) + (t = document.documentElement.scrollLeft ? document.documentElement.scrollLeft : document.body.scrollLeft) + "px"'),d.removeExpression("top"),d.removeExpression("left"),d.setExpression("top",e),d.setExpression("left",f)}}})},focus:function(b){var c=this,b=b&&-1!==a.inArray(b,["first","last"])?b:"first",d=a(":input:enabled:visible:"+b,c.d.wrap);setTimeout(function(){0<d.length?d.focus():c.d.wrap.focus()},10)},getDimensions:function(){var a="undefined"==typeof window.innerHeight?g.height():window.innerHeight;d=[e.height(),e.width()],h=[a,g.width()]},getVal:function(a,b){return a?"number"==typeof a?a:"auto"===a?0:0<a.indexOf("%")?parseInt(a.replace(/%/,""))/100*("h"===b?h[0]:h[1]):parseInt(a.replace(/px/,"")):null},update:function(a,b){return this.d.data?(this.d.origHeight=this.getVal(a,"h"),this.d.origWidth=this.getVal(b,"w"),this.d.data.hide(),a&&this.d.container.css("height",a),b&&this.d.container.css("width",b),this.setContainerDimensions(),this.d.data.show(),this.o.focus&&this.focus(),this.unbindEvents(),void this.bindEvents()):!1},setContainerDimensions:function(){var a=b||c,d=this.d.origHeight?this.d.origHeight:k?this.d.container.height():this.getVal(a?this.d.container[0].currentStyle.height:this.d.container.css("height"),"h"),a=this.d.origWidth?this.d.origWidth:k?this.d.container.width():this.getVal(a?this.d.container[0].currentStyle.width:this.d.container.css("width"),"w"),e=this.d.data.outerHeight(!0),f=this.d.data.outerWidth(!0);this.d.origHeight=this.d.origHeight||d,this.d.origWidth=this.d.origWidth||a;var g=this.o.maxHeight?this.getVal(this.o.maxHeight,"h"):null,i=this.o.maxWidth?this.getVal(this.o.maxWidth,"w"):null,g=g&&g<h[0]?g:h[0],i=i&&i<h[1]?i:h[1],j=this.o.minHeight?this.getVal(this.o.minHeight,"h"):"auto",d=d?this.o.autoResize&&d>g?g:j>d?j:d:e?e>g?g:this.o.minHeight&&"auto"!==j&&j>e?j:e:j,g=this.o.minWidth?this.getVal(this.o.minWidth,"w"):"auto",a=a?this.o.autoResize&&a>i?i:g>a?g:a:f?f>i?i:this.o.minWidth&&"auto"!==g&&g>f?g:f:g;this.d.container.css({height:d,width:a}),this.d.wrap.css({overflow:e>d||f>a?"auto":"visible"}),this.o.autoPosition&&this.setPosition()},setPosition:function(){var a,b;a=h[0]/2-this.d.container.outerHeight(!0)/2,b=h[1]/2-this.d.container.outerWidth(!0)/2;var c="fixed"!==this.d.container.css("position")?g.scrollTop():0;this.o.position&&"[object Array]"===Object.prototype.toString.call(this.o.position)?(a=c+(this.o.position[0]||a),b=this.o.position[1]||b):a=c+a,this.d.container.css({left:b,top:a})},watchTab:function(b){0<a(b.target).parents(".simplemodal-container").length?(this.inputs=a(":input:enabled:visible:first, :input:enabled:visible:last",this.d.data[0]),(!b.shiftKey&&b.target===this.inputs[this.inputs.length-1]||b.shiftKey&&b.target===this.inputs[0]||0===this.inputs.length)&&(b.preventDefault(),this.focus(b.shiftKey?"last":"first"))):(b.preventDefault(),this.focus())},open:function(){this.d.iframe&&this.d.iframe.show(),a.isFunction(this.o.onOpen)?this.o.onOpen.apply(this,[this.d]):(this.d.overlay.show(),this.d.container.show(),this.d.data.show()),this.o.focus&&this.focus(),this.bindEvents()},close:function(){if(!this.d.data)return!1;if(this.unbindEvents(),a.isFunction(this.o.onClose)&&!this.occb)this.occb=!0,this.o.onClose.apply(this,[this.d]);else{if(this.d.placeholder){var b=a("#simplemodal-placeholder");this.o.persist?b.replaceWith(this.d.data.removeClass("simplemodal-data").css("display",this.display)):(this.d.data.hide().remove(),b.replaceWith(this.d.orig))}else this.d.data.hide().remove();this.d.container.hide().remove(),this.d.overlay.hide(),this.d.iframe&&this.d.iframe.hide().remove(),this.d.overlay.remove(),this.d={}}}}}),Config.galleryRefreshPeriod=9e5;